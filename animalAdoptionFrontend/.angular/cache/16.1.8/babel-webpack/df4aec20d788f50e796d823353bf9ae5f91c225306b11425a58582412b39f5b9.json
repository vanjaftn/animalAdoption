{"ast":null,"code":"import { FileSaverService } from 'ngx-filesaver';\nimport { DOCUMENT } from '@angular/common';\nimport { Component, ElementRef, Inject, Input, Renderer2, SecurityContext, ViewChild } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { LIGHTBOX_EVENT, LightboxEvent, LightboxWindowRef } from './lightbox-event.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./lightbox-event.service\";\nimport * as i2 from \"ngx-filesaver\";\nimport * as i3 from \"@angular/platform-browser\";\nconst _c0 = [\"outerContainer\"];\nconst _c1 = [\"container\"];\nconst _c2 = [\"leftArrow\"];\nconst _c3 = [\"rightArrow\"];\nconst _c4 = [\"navArrow\"];\nconst _c5 = [\"dataContainer\"];\nconst _c6 = [\"image\"];\nconst _c7 = [\"caption\"];\nconst _c8 = [\"number\"];\nconst _c9 = [\"lb-content\", \"\"];\nexport class LightboxComponent {\n  constructor(_elemRef, _rendererRef, _lightboxEvent, _lightboxElem, _lightboxWindowRef, _fileSaverService, _sanitizer, _documentRef) {\n    this._elemRef = _elemRef;\n    this._rendererRef = _rendererRef;\n    this._lightboxEvent = _lightboxEvent;\n    this._lightboxElem = _lightboxElem;\n    this._lightboxWindowRef = _lightboxWindowRef;\n    this._fileSaverService = _fileSaverService;\n    this._sanitizer = _sanitizer;\n    this._documentRef = _documentRef;\n    // initialize data\n    this.options = this.options || {};\n    this.album = this.album || [];\n    this.currentImageIndex = this.currentImageIndex || 0;\n    this._windowRef = this._lightboxWindowRef.nativeWindow;\n    // control the interactive of the directive\n    this.ui = {\n      // control the appear of the reloader\n      // false: image has loaded completely and ready to be shown\n      // true: image is still loading\n      showReloader: true,\n      // control the appear of the nav arrow\n      // the arrowNav is the parent of both left and right arrow\n      // in some cases, the parent shows but the child does not show\n      showLeftArrow: false,\n      showRightArrow: false,\n      showArrowNav: false,\n      // control the appear of the zoom and rotate buttons\n      showZoomButton: false,\n      showRotateButton: false,\n      // control whether to show the\n      // page number or not\n      showPageNumber: false,\n      showCaption: false,\n      // control whether to show the download button or not\n      showDownloadButton: false,\n      classList: 'lightbox animation fadeIn'\n    };\n    this.content = {\n      pageNumber: ''\n    };\n    this._event = {};\n    this._lightboxElem = this._elemRef;\n    this._event.subscription = this._lightboxEvent.lightboxEvent$.subscribe(event => this._onReceivedEvent(event));\n    this.rotate = 0;\n  }\n  ngOnInit() {\n    this.album.forEach(album => {\n      if (album.caption) {\n        album.caption = this._sanitizer.sanitize(SecurityContext.HTML, album.caption);\n      }\n    });\n  }\n  ngAfterViewInit() {\n    // need to init css value here, after the view ready\n    // actually these values are always 0\n    this._cssValue = {\n      containerTopPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-top')),\n      containerRightPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-right')),\n      containerBottomPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-bottom')),\n      containerLeftPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-left')),\n      imageBorderWidthTop: Math.round(this._getCssStyleValue(this._imageElem, 'border-top-width')),\n      imageBorderWidthBottom: Math.round(this._getCssStyleValue(this._imageElem, 'border-bottom-width')),\n      imageBorderWidthLeft: Math.round(this._getCssStyleValue(this._imageElem, 'border-left-width')),\n      imageBorderWidthRight: Math.round(this._getCssStyleValue(this._imageElem, 'border-right-width'))\n    };\n    if (this._validateInputData()) {\n      this._prepareComponent();\n      this._registerImageLoadingEvent();\n    }\n  }\n  ngOnDestroy() {\n    if (!this.options.disableKeyboardNav) {\n      // unbind keyboard event\n      this._disableKeyboardNav();\n    }\n    this._event.subscription.unsubscribe();\n  }\n  close($event) {\n    $event.stopPropagation();\n    if ($event.target.classList.contains('lightbox') || $event.target.classList.contains('lb-loader') || $event.target.classList.contains('lb-close')) {\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: LIGHTBOX_EVENT.CLOSE,\n        data: null\n      });\n    }\n  }\n  download($event) {\n    $event.stopPropagation();\n    const url = this.album[this.currentImageIndex].src;\n    const downloadUrl = this.album[this.currentImageIndex].downloadUrl;\n    const parts = url.split('/');\n    const fileName = parts[parts.length - 1];\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    const preloader = new Image();\n    const _this = this;\n    preloader.onload = function () {\n      // @ts-ignore\n      canvas.width = this.naturalWidth;\n      // @ts-ignore\n      canvas.height = this.naturalHeight;\n      // @ts-ignore\n      ctx.drawImage(this, 0, 0);\n      canvas.toBlob(function (blob) {\n        _this._fileSaverService.save(blob, fileName);\n      }, 'image/jpeg', 0.75);\n    };\n    preloader.crossOrigin = '';\n    if (downloadUrl && downloadUrl.length > 0) preloader.src = this._sanitizer.sanitize(SecurityContext.URL, downloadUrl);else preloader.src = this._sanitizer.sanitize(SecurityContext.URL, url);\n  }\n  control($event) {\n    $event.stopPropagation();\n    let height;\n    let width;\n    if ($event.target.classList.contains('lb-turnLeft')) {\n      this.rotate = this.rotate - 90;\n      this._rotateContainer();\n      this._calcTransformPoint();\n      this._documentRef.getElementById('image').style.transform = `rotate(${this.rotate}deg)`;\n      this._documentRef.getElementById('image').style.webkitTransform = `rotate(${this.rotate}deg)`;\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: LIGHTBOX_EVENT.ROTATE_LEFT,\n        data: null\n      });\n    } else if ($event.target.classList.contains('lb-turnRight')) {\n      this.rotate = this.rotate + 90;\n      this._rotateContainer();\n      this._calcTransformPoint();\n      this._documentRef.getElementById('image').style.transform = `rotate(${this.rotate}deg)`;\n      this._documentRef.getElementById('image').style.webkitTransform = `rotate(${this.rotate}deg)`;\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: LIGHTBOX_EVENT.ROTATE_RIGHT,\n        data: null\n      });\n    } else if ($event.target.classList.contains('lb-zoomOut')) {\n      height = parseInt(this._documentRef.getElementById('outerContainer').style.height, 10) / 1.5;\n      width = parseInt(this._documentRef.getElementById('outerContainer').style.width, 10) / 1.5;\n      this._documentRef.getElementById('outerContainer').style.height = height + 'px';\n      this._documentRef.getElementById('outerContainer').style.width = width + 'px';\n      height = parseInt(this._documentRef.getElementById('image').style.height, 10) / 1.5;\n      width = parseInt(this._documentRef.getElementById('image').style.width, 10) / 1.5;\n      this._documentRef.getElementById('image').style.height = height + 'px';\n      this._documentRef.getElementById('image').style.width = width + 'px';\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: LIGHTBOX_EVENT.ZOOM_OUT,\n        data: null\n      });\n    } else if ($event.target.classList.contains('lb-zoomIn')) {\n      height = parseInt(this._documentRef.getElementById('outerContainer').style.height, 10) * 1.5;\n      width = parseInt(this._documentRef.getElementById('outerContainer').style.width, 10) * 1.5;\n      this._documentRef.getElementById('outerContainer').style.height = height + 'px';\n      this._documentRef.getElementById('outerContainer').style.width = width + 'px';\n      height = parseInt(this._documentRef.getElementById('image').style.height, 10) * 1.5;\n      width = parseInt(this._documentRef.getElementById('image').style.width, 10) * 1.5;\n      this._documentRef.getElementById('image').style.height = height + 'px';\n      this._documentRef.getElementById('image').style.width = width + 'px';\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: LIGHTBOX_EVENT.ZOOM_IN,\n        data: null\n      });\n    }\n  }\n  _rotateContainer() {\n    let temp = this.rotate;\n    if (temp < 0) {\n      temp *= -1;\n    }\n    if (temp / 90 % 4 === 1 || temp / 90 % 4 === 3) {\n      this._documentRef.getElementById('outerContainer').style.height = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('outerContainer').style.width = this._documentRef.getElementById('image').style.height;\n      this._documentRef.getElementById('container').style.height = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('container').style.width = this._documentRef.getElementById('image').style.height;\n    } else {\n      this._documentRef.getElementById('outerContainer').style.height = this._documentRef.getElementById('image').style.height;\n      this._documentRef.getElementById('outerContainer').style.width = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('container').style.height = this._documentRef.getElementById('image').style.width;\n      this._documentRef.getElementById('container').style.width = this._documentRef.getElementById('image').style.height;\n    }\n  }\n  _resetImage() {\n    this.rotate = 0;\n    this._documentRef.getElementById('image').style.transform = `rotate(${this.rotate}deg)`;\n    this._documentRef.getElementById('image').style.webkitTransform = `rotate(${this.rotate}deg)`;\n  }\n  _calcTransformPoint() {\n    let height = parseInt(this._documentRef.getElementById('image').style.height, 10);\n    let width = parseInt(this._documentRef.getElementById('image').style.width, 10);\n    let temp = this.rotate % 360;\n    if (temp < 0) {\n      temp = 360 + temp;\n    }\n    if (temp === 90) {\n      this._documentRef.getElementById('image').style.transformOrigin = height / 2 + 'px ' + height / 2 + 'px';\n    } else if (temp === 180) {\n      this._documentRef.getElementById('image').style.transformOrigin = width / 2 + 'px ' + height / 2 + 'px';\n    } else if (temp === 270) {\n      this._documentRef.getElementById('image').style.transformOrigin = width / 2 + 'px ' + width / 2 + 'px';\n    }\n  }\n  nextImage() {\n    if (this.album.length === 1) {\n      return;\n    } else if (this.currentImageIndex === this.album.length - 1) {\n      this._changeImage(0);\n    } else {\n      this._changeImage(this.currentImageIndex + 1);\n    }\n  }\n  prevImage() {\n    if (this.album.length === 1) {\n      return;\n    } else if (this.currentImageIndex === 0 && this.album.length > 1) {\n      this._changeImage(this.album.length - 1);\n    } else {\n      this._changeImage(this.currentImageIndex - 1);\n    }\n  }\n  _validateInputData() {\n    if (this.album && this.album instanceof Array && this.album.length > 0) {\n      for (let i = 0; i < this.album.length; i++) {\n        // check whether each _nside\n        // album has src data or not\n        if (this.album[i].src) {\n          continue;\n        }\n        throw new Error('One of the album data does not have source data');\n      }\n    } else {\n      throw new Error('No album data or album data is not correct in type');\n    }\n    // to prevent data understand as string\n    // convert it to number\n    if (isNaN(this.currentImageIndex)) {\n      throw new Error('Current image index is not a number');\n    } else {\n      this.currentImageIndex = Number(this.currentImageIndex);\n    }\n    return true;\n  }\n  _registerImageLoadingEvent() {\n    const preloader = new Image();\n    preloader.onload = () => {\n      this._onLoadImageSuccess();\n    };\n    const src = this.album[this.currentImageIndex].src;\n    preloader.src = this._sanitizer.sanitize(SecurityContext.URL, src);\n  }\n  /**\n   * Fire when the image is loaded\n   */\n  _onLoadImageSuccess() {\n    if (!this.options.disableKeyboardNav) {\n      // unbind keyboard event during transition\n      this._disableKeyboardNav();\n    }\n    let imageHeight;\n    let imageWidth;\n    let maxImageHeight;\n    let maxImageWidth;\n    let windowHeight;\n    let windowWidth;\n    let naturalImageWidth;\n    let naturalImageHeight;\n    // set default width and height of image to be its natural\n    imageWidth = naturalImageWidth = this._imageElem.nativeElement.naturalWidth;\n    imageHeight = naturalImageHeight = this._imageElem.nativeElement.naturalHeight;\n    if (this.options.fitImageInViewPort) {\n      windowWidth = this._windowRef.innerWidth;\n      windowHeight = this._windowRef.innerHeight;\n      maxImageWidth = windowWidth - this._cssValue.containerLeftPadding - this._cssValue.containerRightPadding - this._cssValue.imageBorderWidthLeft - this._cssValue.imageBorderWidthRight - 20;\n      maxImageHeight = windowHeight - this._cssValue.containerTopPadding - this._cssValue.containerTopPadding - this._cssValue.imageBorderWidthTop - this._cssValue.imageBorderWidthBottom - 120;\n      if (naturalImageWidth > maxImageWidth || naturalImageHeight > maxImageHeight) {\n        if (naturalImageWidth / maxImageWidth > naturalImageHeight / maxImageHeight) {\n          imageWidth = maxImageWidth;\n          imageHeight = Math.round(naturalImageHeight / (naturalImageWidth / imageWidth));\n        } else {\n          imageHeight = maxImageHeight;\n          imageWidth = Math.round(naturalImageWidth / (naturalImageHeight / imageHeight));\n        }\n      }\n      this._rendererRef.setStyle(this._imageElem.nativeElement, 'width', `${imageWidth}px`);\n      this._rendererRef.setStyle(this._imageElem.nativeElement, 'height', `${imageHeight}px`);\n    }\n    this._sizeContainer(imageWidth, imageHeight);\n    if (this.options.centerVertically) {\n      this._centerVertically(imageWidth, imageHeight);\n    }\n  }\n  _centerVertically(imageWidth, imageHeight) {\n    const scrollOffset = this._documentRef.documentElement.scrollTop;\n    const windowHeight = this._windowRef.innerHeight;\n    const viewOffset = windowHeight / 2 - imageHeight / 2;\n    const topDistance = scrollOffset + viewOffset;\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'top', `${topDistance}px`);\n  }\n  _sizeContainer(imageWidth, imageHeight) {\n    const oldWidth = this._outerContainerElem.nativeElement.offsetWidth;\n    const oldHeight = this._outerContainerElem.nativeElement.offsetHeight;\n    const newWidth = imageWidth + this._cssValue.containerRightPadding + this._cssValue.containerLeftPadding + this._cssValue.imageBorderWidthLeft + this._cssValue.imageBorderWidthRight;\n    const newHeight = imageHeight + this._cssValue.containerTopPadding + this._cssValue.containerBottomPadding + this._cssValue.imageBorderWidthTop + this._cssValue.imageBorderWidthBottom;\n    // make sure that distances are large enough for transitionend event to be fired, at least 5px.\n    if (Math.abs(oldWidth - newWidth) + Math.abs(oldHeight - newHeight) > 5) {\n      this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'width', `${newWidth}px`);\n      this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'height', `${newHeight}px`);\n      // bind resize event to outer container\n      // use enableTransition to prevent infinite loader\n      if (this.options.enableTransition) {\n        this._event.transitions = [];\n        ['transitionend', 'webkitTransitionEnd', 'oTransitionEnd', 'MSTransitionEnd'].forEach(eventName => {\n          this._event.transitions.push(this._rendererRef.listen(this._outerContainerElem.nativeElement, eventName, event => {\n            if (event.target === event.currentTarget) {\n              this._postResize(newWidth, newHeight);\n            }\n          }));\n        });\n      } else {\n        this._postResize(newWidth, newHeight);\n      }\n    } else {\n      this._postResize(newWidth, newHeight);\n    }\n  }\n  _postResize(newWidth, newHeight) {\n    // unbind resize event\n    if (Array.isArray(this._event.transitions)) {\n      this._event.transitions.forEach(eventHandler => {\n        eventHandler();\n      });\n      this._event.transitions = [];\n    }\n    this._rendererRef.setStyle(this._dataContainerElem.nativeElement, 'width', `${newWidth}px`);\n    this._showImage();\n  }\n  _showImage() {\n    this.ui.showReloader = false;\n    this._updateNav();\n    this._updateDetails();\n    if (!this.options.disableKeyboardNav) {\n      this._enableKeyboardNav();\n    }\n  }\n  _prepareComponent() {\n    // add css3 animation\n    this._addCssAnimation();\n    // position the image according to user's option\n    this._positionLightBox();\n    // update controls visibility on next view generation\n    setTimeout(() => {\n      this.ui.showZoomButton = this.options.showZoom;\n      this.ui.showRotateButton = this.options.showRotate;\n      this.ui.showDownloadButton = this.options.showDownloadButton;\n    }, 0);\n  }\n  _positionLightBox() {\n    // @see https://stackoverflow.com/questions/3464876/javascript-get-window-x-y-position-for-scroll\n    const top = (this._windowRef.pageYOffset || this._documentRef.documentElement.scrollTop) + this.options.positionFromTop;\n    const left = this._windowRef.pageXOffset || this._documentRef.documentElement.scrollLeft;\n    if (!this.options.centerVertically) {\n      this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'top', `${top}px`);\n    }\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'left', `${left}px`);\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'display', 'block');\n    // disable scrolling of the page while open\n    if (this.options.disableScrolling) {\n      this._rendererRef.addClass(this._documentRef.documentElement, 'lb-disable-scrolling');\n    }\n  }\n  /**\n   * addCssAnimation add css3 classes for animate lightbox\n   */\n  _addCssAnimation() {\n    const resizeDuration = this.options.resizeDuration;\n    const fadeDuration = this.options.fadeDuration;\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._outerContainerElem.nativeElement, '-webkit-transition-duration', `${resizeDuration}s`);\n    this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'transition-duration', `${resizeDuration}s`);\n    this._rendererRef.setStyle(this._dataContainerElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._dataContainerElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._imageElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._imageElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._captionElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._captionElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._numberElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n    this._rendererRef.setStyle(this._numberElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n  }\n  _end() {\n    this.ui.classList = 'lightbox animation fadeOut';\n    if (this.options.disableScrolling) {\n      this._rendererRef.removeClass(this._documentRef.documentElement, 'lb-disable-scrolling');\n    }\n    setTimeout(() => {\n      this.cmpRef.destroy();\n    }, this.options.fadeDuration * 1000);\n  }\n  _updateDetails() {\n    // update the caption\n    if (typeof this.album[this.currentImageIndex].caption !== 'undefined' && this.album[this.currentImageIndex].caption !== '') {\n      this.ui.showCaption = true;\n    }\n    // update the page number if user choose to do so\n    // does not perform numbering the page if the\n    // array length in album <= 1\n    if (this.album.length > 1 && this.options.showImageNumberLabel) {\n      this.ui.showPageNumber = true;\n      this.content.pageNumber = this._albumLabel();\n    }\n  }\n  _albumLabel() {\n    // due to {this.currentImageIndex} is set from 0 to {this.album.length} - 1\n    return this.options.albumLabel.replace(/%1/g, Number(this.currentImageIndex + 1)).replace(/%2/g, this.album.length);\n  }\n  _changeImage(newIndex) {\n    this._resetImage();\n    this.currentImageIndex = newIndex;\n    this._hideImage();\n    this._registerImageLoadingEvent();\n    this._lightboxEvent.broadcastLightboxEvent({\n      id: LIGHTBOX_EVENT.CHANGE_PAGE,\n      data: newIndex\n    });\n  }\n  _hideImage() {\n    this.ui.showReloader = true;\n    this.ui.showArrowNav = false;\n    this.ui.showLeftArrow = false;\n    this.ui.showRightArrow = false;\n    this.ui.showPageNumber = false;\n    this.ui.showCaption = false;\n  }\n  _updateNav() {\n    let alwaysShowNav = false;\n    // check to see the browser support touch event\n    try {\n      this._documentRef.createEvent('TouchEvent');\n      alwaysShowNav = this.options.alwaysShowNavOnTouchDevices ? true : false;\n    } catch (e) {\n      // noop\n    }\n    // initially show the arrow nav\n    // which is the parent of both left and right nav\n    this._showArrowNav();\n    if (this.album.length > 1) {\n      if (this.options.wrapAround) {\n        if (alwaysShowNav) {\n          // alternatives this.$lightbox.find('.lb-prev, .lb-next').css('opacity', '1');\n          this._rendererRef.setStyle(this._leftArrowElem.nativeElement, 'opacity', '1');\n          this._rendererRef.setStyle(this._rightArrowElem.nativeElement, 'opacity', '1');\n        }\n        // alternatives this.$lightbox.find('.lb-prev, .lb-next').show();\n        this._showLeftArrowNav();\n        this._showRightArrowNav();\n      } else {\n        if (this.currentImageIndex > 0) {\n          // alternatives this.$lightbox.find('.lb-prev').show();\n          this._showLeftArrowNav();\n          if (alwaysShowNav) {\n            // alternatives this.$lightbox.find('.lb-prev').css('opacity', '1');\n            this._rendererRef.setStyle(this._leftArrowElem.nativeElement, 'opacity', '1');\n          }\n        }\n        if (this.currentImageIndex < this.album.length - 1) {\n          // alternatives this.$lightbox.find('.lb-next').show();\n          this._showRightArrowNav();\n          if (alwaysShowNav) {\n            // alternatives this.$lightbox.find('.lb-next').css('opacity', '1');\n            this._rendererRef.setStyle(this._rightArrowElem.nativeElement, 'opacity', '1');\n          }\n        }\n      }\n    }\n  }\n  _showLeftArrowNav() {\n    this.ui.showLeftArrow = true;\n  }\n  _showRightArrowNav() {\n    this.ui.showRightArrow = true;\n  }\n  _showArrowNav() {\n    this.ui.showArrowNav = this.album.length !== 1;\n  }\n  _enableKeyboardNav() {\n    this._event.keyup = this._rendererRef.listen('document', 'keyup', event => {\n      this._keyboardAction(event);\n    });\n  }\n  _disableKeyboardNav() {\n    if (this._event.keyup) {\n      this._event.keyup();\n    }\n  }\n  _keyboardAction($event) {\n    const KEYCODE_ESC = 27;\n    const KEYCODE_LEFTARROW = 37;\n    const KEYCODE_RIGHTARROW = 39;\n    const keycode = $event.keyCode;\n    const key = String.fromCharCode(keycode).toLowerCase();\n    if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {\n      this._lightboxEvent.broadcastLightboxEvent({\n        id: LIGHTBOX_EVENT.CLOSE,\n        data: null\n      });\n    } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {\n      if (this.currentImageIndex !== 0) {\n        this._changeImage(this.currentImageIndex - 1);\n      } else if (this.options.wrapAround && this.album.length > 1) {\n        this._changeImage(this.album.length - 1);\n      }\n    } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {\n      if (this.currentImageIndex !== this.album.length - 1) {\n        this._changeImage(this.currentImageIndex + 1);\n      } else if (this.options.wrapAround && this.album.length > 1) {\n        this._changeImage(0);\n      }\n    }\n  }\n  _getCssStyleValue(elem, propertyName) {\n    return parseFloat(this._windowRef.getComputedStyle(elem.nativeElement, null).getPropertyValue(propertyName));\n  }\n  _onReceivedEvent(event) {\n    switch (event.id) {\n      case LIGHTBOX_EVENT.CLOSE:\n        this._end();\n        break;\n      default:\n        break;\n    }\n  }\n}\nLightboxComponent.ɵfac = function LightboxComponent_Factory(t) {\n  return new (t || LightboxComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.LightboxEvent), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.LightboxWindowRef), i0.ɵɵdirectiveInject(i2.FileSaverService), i0.ɵɵdirectiveInject(i3.DomSanitizer), i0.ɵɵdirectiveInject(DOCUMENT));\n};\nLightboxComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LightboxComponent,\n  selectors: [[\"\", \"lb-content\", \"\"]],\n  viewQuery: function LightboxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n      i0.ɵɵviewQuery(_c3, 5);\n      i0.ɵɵviewQuery(_c4, 5);\n      i0.ɵɵviewQuery(_c5, 5);\n      i0.ɵɵviewQuery(_c6, 5);\n      i0.ɵɵviewQuery(_c7, 5);\n      i0.ɵɵviewQuery(_c8, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._outerContainerElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._containerElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._leftArrowElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._rightArrowElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._navArrowElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._dataContainerElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._imageElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._captionElem = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._numberElem = _t.first);\n    }\n  },\n  hostVars: 2,\n  hostBindings: function LightboxComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function LightboxComponent_click_HostBindingHandler($event) {\n        return ctx.close($event);\n      });\n    }\n    if (rf & 2) {\n      i0.ɵɵclassMap(ctx.ui.classList);\n    }\n  },\n  inputs: {\n    album: \"album\",\n    currentImageIndex: \"currentImageIndex\",\n    options: \"options\",\n    cmpRef: \"cmpRef\"\n  },\n  attrs: _c9,\n  decls: 34,\n  vars: 14,\n  consts: [[\"id\", \"outerContainer\", 1, \"lb-outerContainer\", \"transition\"], [\"outerContainer\", \"\"], [\"id\", \"container\", 1, \"lb-container\"], [\"container\", \"\"], [\"id\", \"image\", 1, \"lb-image\", \"animation\", \"fadeIn\", 3, \"src\", \"hidden\"], [\"image\", \"\"], [1, \"lb-nav\", 3, \"hidden\"], [\"navArrow\", \"\"], [1, \"lb-prev\", 3, \"hidden\", \"click\"], [\"leftArrow\", \"\"], [1, \"lb-next\", 3, \"hidden\", \"click\"], [\"rightArrow\", \"\"], [1, \"lb-loader\", 3, \"hidden\", \"click\"], [1, \"lb-cancel\"], [1, \"lb-dataContainer\", 3, \"hidden\"], [\"dataContainer\", \"\"], [1, \"lb-data\"], [1, \"lb-details\"], [1, \"lb-caption\", \"animation\", \"fadeIn\", 3, \"hidden\", \"innerHtml\"], [\"caption\", \"\"], [1, \"lb-number\", \"animation\", \"fadeIn\", 3, \"hidden\"], [\"number\", \"\"], [1, \"lb-controlContainer\"], [1, \"lb-closeContainer\"], [1, \"lb-close\", 3, \"click\"], [1, \"lb-downloadContainer\", 3, \"hidden\"], [1, \"lb-download\", 3, \"click\"], [1, \"lb-turnContainer\", 3, \"hidden\"], [1, \"lb-turnLeft\", 3, \"click\"], [1, \"lb-turnRight\", 3, \"click\"], [1, \"lb-zoomContainer\", 3, \"hidden\"], [1, \"lb-zoomOut\", 3, \"click\"], [1, \"lb-zoomIn\", 3, \"click\"]],\n  template: function LightboxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1)(2, \"div\", 2, 3);\n      i0.ɵɵelement(4, \"img\", 4, 5);\n      i0.ɵɵelementStart(6, \"div\", 6, 7)(8, \"a\", 8, 9);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_8_listener() {\n        return ctx.prevImage();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"a\", 10, 11);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_10_listener() {\n        return ctx.nextImage();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 12);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_div_click_12_listener($event) {\n        return ctx.close($event);\n      });\n      i0.ɵɵelement(13, \"a\", 13);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"div\", 14, 15)(16, \"div\", 16)(17, \"div\", 17);\n      i0.ɵɵelement(18, \"span\", 18, 19);\n      i0.ɵɵelementStart(20, \"span\", 20, 21);\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(23, \"div\", 22)(24, \"div\", 23)(25, \"a\", 24);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_25_listener($event) {\n        return ctx.close($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 25)(27, \"a\", 26);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_27_listener($event) {\n        return ctx.download($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(28, \"div\", 27)(29, \"a\", 28);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_29_listener($event) {\n        return ctx.control($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"a\", 29);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_30_listener($event) {\n        return ctx.control($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"div\", 30)(32, \"a\", 31);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_32_listener($event) {\n        return ctx.control($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"a\", 32);\n      i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_33_listener($event) {\n        return ctx.control($event);\n      });\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"src\", ctx.album[ctx.currentImageIndex].src, i0.ɵɵsanitizeUrl)(\"hidden\", ctx.ui.showReloader);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showArrowNav);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showLeftArrow);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showRightArrow);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showReloader);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", ctx.ui.showReloader);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showCaption)(\"innerHtml\", ctx.album[ctx.currentImageIndex].caption, i0.ɵɵsanitizeHtml);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showPageNumber);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.content.pageNumber);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showDownloadButton);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showRotateButton);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hidden\", !ctx.ui.showZoomButton);\n    }\n  },\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LightboxComponent, [{\n    type: Component,\n    args: [{\n      template: `\n    <div class=\"lb-outerContainer transition\" #outerContainer id=\"outerContainer\">\n      <div class=\"lb-container\" #container id=\"container\">\n        <img class=\"lb-image\"\n             id=\"image\"\n             [src]=\"album[currentImageIndex].src\"\n             class=\"lb-image animation fadeIn\"\n             [hidden]=\"ui.showReloader\"\n             #image>\n        <div class=\"lb-nav\" [hidden]=\"!ui.showArrowNav\" #navArrow>\n          <a class=\"lb-prev\" [hidden]=\"!ui.showLeftArrow\" (click)=\"prevImage()\" #leftArrow></a>\n          <a class=\"lb-next\" [hidden]=\"!ui.showRightArrow\" (click)=\"nextImage()\" #rightArrow></a>\n        </div>\n        <div class=\"lb-loader\" [hidden]=\"!ui.showReloader\" (click)=\"close($event)\">\n          <a class=\"lb-cancel\"></a>\n        </div>\n      </div>\n    </div>\n    <div class=\"lb-dataContainer\" [hidden]=\"ui.showReloader\" #dataContainer>\n      <div class=\"lb-data\">\n        <div class=\"lb-details\">\n          <span class=\"lb-caption animation fadeIn\" [hidden]=\"!ui.showCaption\" [innerHtml]=\"album[currentImageIndex].caption\" #caption>\n          </span>\n          <span class=\"lb-number animation fadeIn\" [hidden]=\"!ui.showPageNumber\" #number>{{ content.pageNumber }}</span>\n        </div>\n        <div class=\"lb-controlContainer\">\n          <div class=\"lb-closeContainer\">\n            <a class=\"lb-close\" (click)=\"close($event)\"></a>\n          </div>\n          <div class=\"lb-downloadContainer\" [hidden]=\"!ui.showDownloadButton\">\n            <a class=\"lb-download\" (click)=\"download($event)\"></a>\n          </div>\n          <div class=\"lb-turnContainer\" [hidden]=\"!ui.showRotateButton\">\n            <a class=\"lb-turnLeft\" (click)=\"control($event)\"></a>\n            <a class=\"lb-turnRight\" (click)=\"control($event)\"></a>\n          </div>\n          <div class=\"lb-zoomContainer\" [hidden]=\"!ui.showZoomButton\">\n            <a class=\"lb-zoomOut\" (click)=\"control($event)\"></a>\n            <a class=\"lb-zoomIn\" (click)=\"control($event)\"></a>\n          </div>\n        </div>\n      </div>\n    </div>`,\n      selector: '[lb-content]',\n      host: {\n        '(click)': 'close($event)',\n        '[class]': 'ui.classList'\n      }\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i1.LightboxEvent\n    }, {\n      type: i0.ElementRef\n    }, {\n      type: i1.LightboxWindowRef\n    }, {\n      type: i2.FileSaverService\n    }, {\n      type: i3.DomSanitizer\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }];\n  }, {\n    album: [{\n      type: Input\n    }],\n    currentImageIndex: [{\n      type: Input\n    }],\n    options: [{\n      type: Input\n    }],\n    cmpRef: [{\n      type: Input\n    }],\n    _outerContainerElem: [{\n      type: ViewChild,\n      args: ['outerContainer', {\n        static: false\n      }]\n    }],\n    _containerElem: [{\n      type: ViewChild,\n      args: ['container', {\n        static: false\n      }]\n    }],\n    _leftArrowElem: [{\n      type: ViewChild,\n      args: ['leftArrow', {\n        static: false\n      }]\n    }],\n    _rightArrowElem: [{\n      type: ViewChild,\n      args: ['rightArrow', {\n        static: false\n      }]\n    }],\n    _navArrowElem: [{\n      type: ViewChild,\n      args: ['navArrow', {\n        static: false\n      }]\n    }],\n    _dataContainerElem: [{\n      type: ViewChild,\n      args: ['dataContainer', {\n        static: false\n      }]\n    }],\n    _imageElem: [{\n      type: ViewChild,\n      args: ['image', {\n        static: false\n      }]\n    }],\n    _captionElem: [{\n      type: ViewChild,\n      args: ['caption', {\n        static: false\n      }]\n    }],\n    _numberElem: [{\n      type: ViewChild,\n      args: ['number', {\n        static: false\n      }]\n    }]\n  });\n})();","map":{"version":3,"names":["FileSaverService","DOCUMENT","Component","ElementRef","Inject","Input","Renderer2","SecurityContext","ViewChild","DomSanitizer","LIGHTBOX_EVENT","LightboxEvent","LightboxWindowRef","i0","i1","i2","i3","_c0","_c1","_c2","_c3","_c4","_c5","_c6","_c7","_c8","_c9","LightboxComponent","constructor","_elemRef","_rendererRef","_lightboxEvent","_lightboxElem","_lightboxWindowRef","_fileSaverService","_sanitizer","_documentRef","options","album","currentImageIndex","_windowRef","nativeWindow","ui","showReloader","showLeftArrow","showRightArrow","showArrowNav","showZoomButton","showRotateButton","showPageNumber","showCaption","showDownloadButton","classList","content","pageNumber","_event","subscription","lightboxEvent$","subscribe","event","_onReceivedEvent","rotate","ngOnInit","forEach","caption","sanitize","HTML","ngAfterViewInit","_cssValue","containerTopPadding","Math","round","_getCssStyleValue","_containerElem","containerRightPadding","containerBottomPadding","containerLeftPadding","imageBorderWidthTop","_imageElem","imageBorderWidthBottom","imageBorderWidthLeft","imageBorderWidthRight","_validateInputData","_prepareComponent","_registerImageLoadingEvent","ngOnDestroy","disableKeyboardNav","_disableKeyboardNav","unsubscribe","close","$event","stopPropagation","target","contains","broadcastLightboxEvent","id","CLOSE","data","download","url","src","downloadUrl","parts","split","fileName","length","canvas","document","createElement","ctx","getContext","preloader","Image","_this","onload","width","naturalWidth","height","naturalHeight","drawImage","toBlob","blob","save","crossOrigin","URL","control","_rotateContainer","_calcTransformPoint","getElementById","style","transform","webkitTransform","ROTATE_LEFT","ROTATE_RIGHT","parseInt","ZOOM_OUT","ZOOM_IN","temp","_resetImage","transformOrigin","nextImage","_changeImage","prevImage","Array","i","Error","isNaN","Number","_onLoadImageSuccess","imageHeight","imageWidth","maxImageHeight","maxImageWidth","windowHeight","windowWidth","naturalImageWidth","naturalImageHeight","nativeElement","fitImageInViewPort","innerWidth","innerHeight","setStyle","_sizeContainer","centerVertically","_centerVertically","scrollOffset","documentElement","scrollTop","viewOffset","topDistance","oldWidth","_outerContainerElem","offsetWidth","oldHeight","offsetHeight","newWidth","newHeight","abs","enableTransition","transitions","eventName","push","listen","currentTarget","_postResize","isArray","eventHandler","_dataContainerElem","_showImage","_updateNav","_updateDetails","_enableKeyboardNav","_addCssAnimation","_positionLightBox","setTimeout","showZoom","showRotate","top","pageYOffset","positionFromTop","left","pageXOffset","scrollLeft","disableScrolling","addClass","resizeDuration","fadeDuration","_captionElem","_numberElem","_end","removeClass","cmpRef","destroy","showImageNumberLabel","_albumLabel","albumLabel","replace","newIndex","_hideImage","CHANGE_PAGE","alwaysShowNav","createEvent","alwaysShowNavOnTouchDevices","e","_showArrowNav","wrapAround","_leftArrowElem","_rightArrowElem","_showLeftArrowNav","_showRightArrowNav","keyup","_keyboardAction","KEYCODE_ESC","KEYCODE_LEFTARROW","KEYCODE_RIGHTARROW","keycode","keyCode","key","String","fromCharCode","toLowerCase","match","elem","propertyName","parseFloat","getComputedStyle","getPropertyValue","ɵfac","LightboxComponent_Factory","t","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","LightboxComponent_Query","rf","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","_navArrowElem","hostVars","hostBindings","LightboxComponent_HostBindings","ɵɵlistener","LightboxComponent_click_HostBindingHandler","ɵɵclassMap","inputs","attrs","decls","vars","consts","template","LightboxComponent_Template","ɵɵelementStart","ɵɵelement","LightboxComponent_Template_a_click_8_listener","ɵɵelementEnd","LightboxComponent_Template_a_click_10_listener","LightboxComponent_Template_div_click_12_listener","ɵɵtext","LightboxComponent_Template_a_click_25_listener","LightboxComponent_Template_a_click_27_listener","LightboxComponent_Template_a_click_29_listener","LightboxComponent_Template_a_click_30_listener","LightboxComponent_Template_a_click_32_listener","LightboxComponent_Template_a_click_33_listener","ɵɵadvance","ɵɵproperty","ɵɵsanitizeUrl","ɵɵsanitizeHtml","ɵɵtextInterpolate","encapsulation","ngDevMode","ɵsetClassMetadata","args","selector","host","undefined","decorators","static"],"sources":["C:/Users/vanja/Desktop/diplomski/animalAdoption/animalAdoptionFrontend/node_modules/ngx-lightbox/lightbox.component.js"],"sourcesContent":["import { FileSaverService } from 'ngx-filesaver';\nimport { DOCUMENT } from '@angular/common';\nimport { Component, ElementRef, Inject, Input, Renderer2, SecurityContext, ViewChild, } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { LIGHTBOX_EVENT, LightboxEvent, LightboxWindowRef, } from './lightbox-event.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./lightbox-event.service\";\nimport * as i2 from \"ngx-filesaver\";\nimport * as i3 from \"@angular/platform-browser\";\nconst _c0 = [\"outerContainer\"];\nconst _c1 = [\"container\"];\nconst _c2 = [\"leftArrow\"];\nconst _c3 = [\"rightArrow\"];\nconst _c4 = [\"navArrow\"];\nconst _c5 = [\"dataContainer\"];\nconst _c6 = [\"image\"];\nconst _c7 = [\"caption\"];\nconst _c8 = [\"number\"];\nconst _c9 = [\"lb-content\", \"\"];\nexport class LightboxComponent {\n    constructor(_elemRef, _rendererRef, _lightboxEvent, _lightboxElem, _lightboxWindowRef, _fileSaverService, _sanitizer, _documentRef) {\n        this._elemRef = _elemRef;\n        this._rendererRef = _rendererRef;\n        this._lightboxEvent = _lightboxEvent;\n        this._lightboxElem = _lightboxElem;\n        this._lightboxWindowRef = _lightboxWindowRef;\n        this._fileSaverService = _fileSaverService;\n        this._sanitizer = _sanitizer;\n        this._documentRef = _documentRef;\n        // initialize data\n        this.options = this.options || {};\n        this.album = this.album || [];\n        this.currentImageIndex = this.currentImageIndex || 0;\n        this._windowRef = this._lightboxWindowRef.nativeWindow;\n        // control the interactive of the directive\n        this.ui = {\n            // control the appear of the reloader\n            // false: image has loaded completely and ready to be shown\n            // true: image is still loading\n            showReloader: true,\n            // control the appear of the nav arrow\n            // the arrowNav is the parent of both left and right arrow\n            // in some cases, the parent shows but the child does not show\n            showLeftArrow: false,\n            showRightArrow: false,\n            showArrowNav: false,\n            // control the appear of the zoom and rotate buttons\n            showZoomButton: false,\n            showRotateButton: false,\n            // control whether to show the\n            // page number or not\n            showPageNumber: false,\n            showCaption: false,\n            // control whether to show the download button or not\n            showDownloadButton: false,\n            classList: 'lightbox animation fadeIn'\n        };\n        this.content = {\n            pageNumber: ''\n        };\n        this._event = {};\n        this._lightboxElem = this._elemRef;\n        this._event.subscription = this._lightboxEvent.lightboxEvent$\n            .subscribe((event) => this._onReceivedEvent(event));\n        this.rotate = 0;\n    }\n    ngOnInit() {\n        this.album.forEach(album => {\n            if (album.caption) {\n                album.caption = this._sanitizer.sanitize(SecurityContext.HTML, album.caption);\n            }\n        });\n    }\n    ngAfterViewInit() {\n        // need to init css value here, after the view ready\n        // actually these values are always 0\n        this._cssValue = {\n            containerTopPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-top')),\n            containerRightPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-right')),\n            containerBottomPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-bottom')),\n            containerLeftPadding: Math.round(this._getCssStyleValue(this._containerElem, 'padding-left')),\n            imageBorderWidthTop: Math.round(this._getCssStyleValue(this._imageElem, 'border-top-width')),\n            imageBorderWidthBottom: Math.round(this._getCssStyleValue(this._imageElem, 'border-bottom-width')),\n            imageBorderWidthLeft: Math.round(this._getCssStyleValue(this._imageElem, 'border-left-width')),\n            imageBorderWidthRight: Math.round(this._getCssStyleValue(this._imageElem, 'border-right-width'))\n        };\n        if (this._validateInputData()) {\n            this._prepareComponent();\n            this._registerImageLoadingEvent();\n        }\n    }\n    ngOnDestroy() {\n        if (!this.options.disableKeyboardNav) {\n            // unbind keyboard event\n            this._disableKeyboardNav();\n        }\n        this._event.subscription.unsubscribe();\n    }\n    close($event) {\n        $event.stopPropagation();\n        if ($event.target.classList.contains('lightbox') ||\n            $event.target.classList.contains('lb-loader') ||\n            $event.target.classList.contains('lb-close')) {\n            this._lightboxEvent.broadcastLightboxEvent({ id: LIGHTBOX_EVENT.CLOSE, data: null });\n        }\n    }\n    download($event) {\n        $event.stopPropagation();\n        const url = this.album[this.currentImageIndex].src;\n        const downloadUrl = this.album[this.currentImageIndex].downloadUrl;\n        const parts = url.split('/');\n        const fileName = parts[parts.length - 1];\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        const preloader = new Image();\n        const _this = this;\n        preloader.onload = function () {\n            // @ts-ignore\n            canvas.width = this.naturalWidth;\n            // @ts-ignore\n            canvas.height = this.naturalHeight;\n            // @ts-ignore\n            ctx.drawImage(this, 0, 0);\n            canvas.toBlob(function (blob) {\n                _this._fileSaverService.save(blob, fileName);\n            }, 'image/jpeg', 0.75);\n        };\n        preloader.crossOrigin = '';\n        if (downloadUrl && downloadUrl.length > 0)\n            preloader.src = this._sanitizer.sanitize(SecurityContext.URL, downloadUrl);\n        else\n            preloader.src = this._sanitizer.sanitize(SecurityContext.URL, url);\n    }\n    control($event) {\n        $event.stopPropagation();\n        let height;\n        let width;\n        if ($event.target.classList.contains('lb-turnLeft')) {\n            this.rotate = this.rotate - 90;\n            this._rotateContainer();\n            this._calcTransformPoint();\n            this._documentRef.getElementById('image').style.transform = `rotate(${this.rotate}deg)`;\n            this._documentRef.getElementById('image').style.webkitTransform = `rotate(${this.rotate}deg)`;\n            this._lightboxEvent.broadcastLightboxEvent({ id: LIGHTBOX_EVENT.ROTATE_LEFT, data: null });\n        }\n        else if ($event.target.classList.contains('lb-turnRight')) {\n            this.rotate = this.rotate + 90;\n            this._rotateContainer();\n            this._calcTransformPoint();\n            this._documentRef.getElementById('image').style.transform = `rotate(${this.rotate}deg)`;\n            this._documentRef.getElementById('image').style.webkitTransform = `rotate(${this.rotate}deg)`;\n            this._lightboxEvent.broadcastLightboxEvent({ id: LIGHTBOX_EVENT.ROTATE_RIGHT, data: null });\n        }\n        else if ($event.target.classList.contains('lb-zoomOut')) {\n            height = parseInt(this._documentRef.getElementById('outerContainer').style.height, 10) / 1.5;\n            width = parseInt(this._documentRef.getElementById('outerContainer').style.width, 10) / 1.5;\n            this._documentRef.getElementById('outerContainer').style.height = height + 'px';\n            this._documentRef.getElementById('outerContainer').style.width = width + 'px';\n            height = parseInt(this._documentRef.getElementById('image').style.height, 10) / 1.5;\n            width = parseInt(this._documentRef.getElementById('image').style.width, 10) / 1.5;\n            this._documentRef.getElementById('image').style.height = height + 'px';\n            this._documentRef.getElementById('image').style.width = width + 'px';\n            this._lightboxEvent.broadcastLightboxEvent({ id: LIGHTBOX_EVENT.ZOOM_OUT, data: null });\n        }\n        else if ($event.target.classList.contains('lb-zoomIn')) {\n            height = parseInt(this._documentRef.getElementById('outerContainer').style.height, 10) * 1.5;\n            width = parseInt(this._documentRef.getElementById('outerContainer').style.width, 10) * 1.5;\n            this._documentRef.getElementById('outerContainer').style.height = height + 'px';\n            this._documentRef.getElementById('outerContainer').style.width = width + 'px';\n            height = parseInt(this._documentRef.getElementById('image').style.height, 10) * 1.5;\n            width = parseInt(this._documentRef.getElementById('image').style.width, 10) * 1.5;\n            this._documentRef.getElementById('image').style.height = height + 'px';\n            this._documentRef.getElementById('image').style.width = width + 'px';\n            this._lightboxEvent.broadcastLightboxEvent({ id: LIGHTBOX_EVENT.ZOOM_IN, data: null });\n        }\n    }\n    _rotateContainer() {\n        let temp = this.rotate;\n        if (temp < 0) {\n            temp *= -1;\n        }\n        if (temp / 90 % 4 === 1 || temp / 90 % 4 === 3) {\n            this._documentRef.getElementById('outerContainer').style.height = this._documentRef.getElementById('image').style.width;\n            this._documentRef.getElementById('outerContainer').style.width = this._documentRef.getElementById('image').style.height;\n            this._documentRef.getElementById('container').style.height = this._documentRef.getElementById('image').style.width;\n            this._documentRef.getElementById('container').style.width = this._documentRef.getElementById('image').style.height;\n        }\n        else {\n            this._documentRef.getElementById('outerContainer').style.height = this._documentRef.getElementById('image').style.height;\n            this._documentRef.getElementById('outerContainer').style.width = this._documentRef.getElementById('image').style.width;\n            this._documentRef.getElementById('container').style.height = this._documentRef.getElementById('image').style.width;\n            this._documentRef.getElementById('container').style.width = this._documentRef.getElementById('image').style.height;\n        }\n    }\n    _resetImage() {\n        this.rotate = 0;\n        this._documentRef.getElementById('image').style.transform = `rotate(${this.rotate}deg)`;\n        this._documentRef.getElementById('image').style.webkitTransform = `rotate(${this.rotate}deg)`;\n    }\n    _calcTransformPoint() {\n        let height = parseInt(this._documentRef.getElementById('image').style.height, 10);\n        let width = parseInt(this._documentRef.getElementById('image').style.width, 10);\n        let temp = this.rotate % 360;\n        if (temp < 0) {\n            temp = 360 + temp;\n        }\n        if (temp === 90) {\n            this._documentRef.getElementById('image').style.transformOrigin = (height / 2) + 'px ' + (height / 2) + 'px';\n        }\n        else if (temp === 180) {\n            this._documentRef.getElementById('image').style.transformOrigin = (width / 2) + 'px ' + (height / 2) + 'px';\n        }\n        else if (temp === 270) {\n            this._documentRef.getElementById('image').style.transformOrigin = (width / 2) + 'px ' + (width / 2) + 'px';\n        }\n    }\n    nextImage() {\n        if (this.album.length === 1) {\n            return;\n        }\n        else if (this.currentImageIndex === this.album.length - 1) {\n            this._changeImage(0);\n        }\n        else {\n            this._changeImage(this.currentImageIndex + 1);\n        }\n    }\n    prevImage() {\n        if (this.album.length === 1) {\n            return;\n        }\n        else if (this.currentImageIndex === 0 && this.album.length > 1) {\n            this._changeImage(this.album.length - 1);\n        }\n        else {\n            this._changeImage(this.currentImageIndex - 1);\n        }\n    }\n    _validateInputData() {\n        if (this.album &&\n            this.album instanceof Array &&\n            this.album.length > 0) {\n            for (let i = 0; i < this.album.length; i++) {\n                // check whether each _nside\n                // album has src data or not\n                if (this.album[i].src) {\n                    continue;\n                }\n                throw new Error('One of the album data does not have source data');\n            }\n        }\n        else {\n            throw new Error('No album data or album data is not correct in type');\n        }\n        // to prevent data understand as string\n        // convert it to number\n        if (isNaN(this.currentImageIndex)) {\n            throw new Error('Current image index is not a number');\n        }\n        else {\n            this.currentImageIndex = Number(this.currentImageIndex);\n        }\n        return true;\n    }\n    _registerImageLoadingEvent() {\n        const preloader = new Image();\n        preloader.onload = () => {\n            this._onLoadImageSuccess();\n        };\n        const src = this.album[this.currentImageIndex].src;\n        preloader.src = this._sanitizer.sanitize(SecurityContext.URL, src);\n    }\n    /**\n     * Fire when the image is loaded\n     */\n    _onLoadImageSuccess() {\n        if (!this.options.disableKeyboardNav) {\n            // unbind keyboard event during transition\n            this._disableKeyboardNav();\n        }\n        let imageHeight;\n        let imageWidth;\n        let maxImageHeight;\n        let maxImageWidth;\n        let windowHeight;\n        let windowWidth;\n        let naturalImageWidth;\n        let naturalImageHeight;\n        // set default width and height of image to be its natural\n        imageWidth = naturalImageWidth = this._imageElem.nativeElement.naturalWidth;\n        imageHeight = naturalImageHeight = this._imageElem.nativeElement.naturalHeight;\n        if (this.options.fitImageInViewPort) {\n            windowWidth = this._windowRef.innerWidth;\n            windowHeight = this._windowRef.innerHeight;\n            maxImageWidth = windowWidth - this._cssValue.containerLeftPadding -\n                this._cssValue.containerRightPadding - this._cssValue.imageBorderWidthLeft -\n                this._cssValue.imageBorderWidthRight - 20;\n            maxImageHeight = windowHeight - this._cssValue.containerTopPadding -\n                this._cssValue.containerTopPadding - this._cssValue.imageBorderWidthTop -\n                this._cssValue.imageBorderWidthBottom - 120;\n            if (naturalImageWidth > maxImageWidth || naturalImageHeight > maxImageHeight) {\n                if ((naturalImageWidth / maxImageWidth) > (naturalImageHeight / maxImageHeight)) {\n                    imageWidth = maxImageWidth;\n                    imageHeight = Math.round(naturalImageHeight / (naturalImageWidth / imageWidth));\n                }\n                else {\n                    imageHeight = maxImageHeight;\n                    imageWidth = Math.round(naturalImageWidth / (naturalImageHeight / imageHeight));\n                }\n            }\n            this._rendererRef.setStyle(this._imageElem.nativeElement, 'width', `${imageWidth}px`);\n            this._rendererRef.setStyle(this._imageElem.nativeElement, 'height', `${imageHeight}px`);\n        }\n        this._sizeContainer(imageWidth, imageHeight);\n        if (this.options.centerVertically) {\n            this._centerVertically(imageWidth, imageHeight);\n        }\n    }\n    _centerVertically(imageWidth, imageHeight) {\n        const scrollOffset = this._documentRef.documentElement.scrollTop;\n        const windowHeight = this._windowRef.innerHeight;\n        const viewOffset = windowHeight / 2 - imageHeight / 2;\n        const topDistance = scrollOffset + viewOffset;\n        this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'top', `${topDistance}px`);\n    }\n    _sizeContainer(imageWidth, imageHeight) {\n        const oldWidth = this._outerContainerElem.nativeElement.offsetWidth;\n        const oldHeight = this._outerContainerElem.nativeElement.offsetHeight;\n        const newWidth = imageWidth + this._cssValue.containerRightPadding + this._cssValue.containerLeftPadding +\n            this._cssValue.imageBorderWidthLeft + this._cssValue.imageBorderWidthRight;\n        const newHeight = imageHeight + this._cssValue.containerTopPadding + this._cssValue.containerBottomPadding +\n            this._cssValue.imageBorderWidthTop + this._cssValue.imageBorderWidthBottom;\n        // make sure that distances are large enough for transitionend event to be fired, at least 5px.\n        if (Math.abs(oldWidth - newWidth) + Math.abs(oldHeight - newHeight) > 5) {\n            this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'width', `${newWidth}px`);\n            this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'height', `${newHeight}px`);\n            // bind resize event to outer container\n            // use enableTransition to prevent infinite loader\n            if (this.options.enableTransition) {\n                this._event.transitions = [];\n                ['transitionend', 'webkitTransitionEnd', 'oTransitionEnd', 'MSTransitionEnd'].forEach(eventName => {\n                    this._event.transitions.push(this._rendererRef.listen(this._outerContainerElem.nativeElement, eventName, (event) => {\n                        if (event.target === event.currentTarget) {\n                            this._postResize(newWidth, newHeight);\n                        }\n                    }));\n                });\n            }\n            else {\n                this._postResize(newWidth, newHeight);\n            }\n        }\n        else {\n            this._postResize(newWidth, newHeight);\n        }\n    }\n    _postResize(newWidth, newHeight) {\n        // unbind resize event\n        if (Array.isArray(this._event.transitions)) {\n            this._event.transitions.forEach((eventHandler) => {\n                eventHandler();\n            });\n            this._event.transitions = [];\n        }\n        this._rendererRef.setStyle(this._dataContainerElem.nativeElement, 'width', `${newWidth}px`);\n        this._showImage();\n    }\n    _showImage() {\n        this.ui.showReloader = false;\n        this._updateNav();\n        this._updateDetails();\n        if (!this.options.disableKeyboardNav) {\n            this._enableKeyboardNav();\n        }\n    }\n    _prepareComponent() {\n        // add css3 animation\n        this._addCssAnimation();\n        // position the image according to user's option\n        this._positionLightBox();\n        // update controls visibility on next view generation\n        setTimeout(() => {\n            this.ui.showZoomButton = this.options.showZoom;\n            this.ui.showRotateButton = this.options.showRotate;\n            this.ui.showDownloadButton = this.options.showDownloadButton;\n        }, 0);\n    }\n    _positionLightBox() {\n        // @see https://stackoverflow.com/questions/3464876/javascript-get-window-x-y-position-for-scroll\n        const top = (this._windowRef.pageYOffset || this._documentRef.documentElement.scrollTop) +\n            this.options.positionFromTop;\n        const left = this._windowRef.pageXOffset || this._documentRef.documentElement.scrollLeft;\n        if (!this.options.centerVertically) {\n            this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'top', `${top}px`);\n        }\n        this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'left', `${left}px`);\n        this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'display', 'block');\n        // disable scrolling of the page while open\n        if (this.options.disableScrolling) {\n            this._rendererRef.addClass(this._documentRef.documentElement, 'lb-disable-scrolling');\n        }\n    }\n    /**\n     * addCssAnimation add css3 classes for animate lightbox\n     */\n    _addCssAnimation() {\n        const resizeDuration = this.options.resizeDuration;\n        const fadeDuration = this.options.fadeDuration;\n        this._rendererRef.setStyle(this._lightboxElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._lightboxElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._outerContainerElem.nativeElement, '-webkit-transition-duration', `${resizeDuration}s`);\n        this._rendererRef.setStyle(this._outerContainerElem.nativeElement, 'transition-duration', `${resizeDuration}s`);\n        this._rendererRef.setStyle(this._dataContainerElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._dataContainerElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._imageElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._imageElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._captionElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._captionElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._numberElem.nativeElement, '-webkit-animation-duration', `${fadeDuration}s`);\n        this._rendererRef.setStyle(this._numberElem.nativeElement, 'animation-duration', `${fadeDuration}s`);\n    }\n    _end() {\n        this.ui.classList = 'lightbox animation fadeOut';\n        if (this.options.disableScrolling) {\n            this._rendererRef.removeClass(this._documentRef.documentElement, 'lb-disable-scrolling');\n        }\n        setTimeout(() => {\n            this.cmpRef.destroy();\n        }, this.options.fadeDuration * 1000);\n    }\n    _updateDetails() {\n        // update the caption\n        if (typeof this.album[this.currentImageIndex].caption !== 'undefined' &&\n            this.album[this.currentImageIndex].caption !== '') {\n            this.ui.showCaption = true;\n        }\n        // update the page number if user choose to do so\n        // does not perform numbering the page if the\n        // array length in album <= 1\n        if (this.album.length > 1 && this.options.showImageNumberLabel) {\n            this.ui.showPageNumber = true;\n            this.content.pageNumber = this._albumLabel();\n        }\n    }\n    _albumLabel() {\n        // due to {this.currentImageIndex} is set from 0 to {this.album.length} - 1\n        return this.options.albumLabel.replace(/%1/g, Number(this.currentImageIndex + 1)).replace(/%2/g, this.album.length);\n    }\n    _changeImage(newIndex) {\n        this._resetImage();\n        this.currentImageIndex = newIndex;\n        this._hideImage();\n        this._registerImageLoadingEvent();\n        this._lightboxEvent.broadcastLightboxEvent({ id: LIGHTBOX_EVENT.CHANGE_PAGE, data: newIndex });\n    }\n    _hideImage() {\n        this.ui.showReloader = true;\n        this.ui.showArrowNav = false;\n        this.ui.showLeftArrow = false;\n        this.ui.showRightArrow = false;\n        this.ui.showPageNumber = false;\n        this.ui.showCaption = false;\n    }\n    _updateNav() {\n        let alwaysShowNav = false;\n        // check to see the browser support touch event\n        try {\n            this._documentRef.createEvent('TouchEvent');\n            alwaysShowNav = (this.options.alwaysShowNavOnTouchDevices) ? true : false;\n        }\n        catch (e) {\n            // noop\n        }\n        // initially show the arrow nav\n        // which is the parent of both left and right nav\n        this._showArrowNav();\n        if (this.album.length > 1) {\n            if (this.options.wrapAround) {\n                if (alwaysShowNav) {\n                    // alternatives this.$lightbox.find('.lb-prev, .lb-next').css('opacity', '1');\n                    this._rendererRef.setStyle(this._leftArrowElem.nativeElement, 'opacity', '1');\n                    this._rendererRef.setStyle(this._rightArrowElem.nativeElement, 'opacity', '1');\n                }\n                // alternatives this.$lightbox.find('.lb-prev, .lb-next').show();\n                this._showLeftArrowNav();\n                this._showRightArrowNav();\n            }\n            else {\n                if (this.currentImageIndex > 0) {\n                    // alternatives this.$lightbox.find('.lb-prev').show();\n                    this._showLeftArrowNav();\n                    if (alwaysShowNav) {\n                        // alternatives this.$lightbox.find('.lb-prev').css('opacity', '1');\n                        this._rendererRef.setStyle(this._leftArrowElem.nativeElement, 'opacity', '1');\n                    }\n                }\n                if (this.currentImageIndex < this.album.length - 1) {\n                    // alternatives this.$lightbox.find('.lb-next').show();\n                    this._showRightArrowNav();\n                    if (alwaysShowNav) {\n                        // alternatives this.$lightbox.find('.lb-next').css('opacity', '1');\n                        this._rendererRef.setStyle(this._rightArrowElem.nativeElement, 'opacity', '1');\n                    }\n                }\n            }\n        }\n    }\n    _showLeftArrowNav() {\n        this.ui.showLeftArrow = true;\n    }\n    _showRightArrowNav() {\n        this.ui.showRightArrow = true;\n    }\n    _showArrowNav() {\n        this.ui.showArrowNav = (this.album.length !== 1);\n    }\n    _enableKeyboardNav() {\n        this._event.keyup = this._rendererRef.listen('document', 'keyup', (event) => {\n            this._keyboardAction(event);\n        });\n    }\n    _disableKeyboardNav() {\n        if (this._event.keyup) {\n            this._event.keyup();\n        }\n    }\n    _keyboardAction($event) {\n        const KEYCODE_ESC = 27;\n        const KEYCODE_LEFTARROW = 37;\n        const KEYCODE_RIGHTARROW = 39;\n        const keycode = $event.keyCode;\n        const key = String.fromCharCode(keycode).toLowerCase();\n        if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {\n            this._lightboxEvent.broadcastLightboxEvent({ id: LIGHTBOX_EVENT.CLOSE, data: null });\n        }\n        else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {\n            if (this.currentImageIndex !== 0) {\n                this._changeImage(this.currentImageIndex - 1);\n            }\n            else if (this.options.wrapAround && this.album.length > 1) {\n                this._changeImage(this.album.length - 1);\n            }\n        }\n        else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {\n            if (this.currentImageIndex !== this.album.length - 1) {\n                this._changeImage(this.currentImageIndex + 1);\n            }\n            else if (this.options.wrapAround && this.album.length > 1) {\n                this._changeImage(0);\n            }\n        }\n    }\n    _getCssStyleValue(elem, propertyName) {\n        return parseFloat(this._windowRef\n            .getComputedStyle(elem.nativeElement, null)\n            .getPropertyValue(propertyName));\n    }\n    _onReceivedEvent(event) {\n        switch (event.id) {\n            case LIGHTBOX_EVENT.CLOSE:\n                this._end();\n                break;\n            default:\n                break;\n        }\n    }\n}\nLightboxComponent.ɵfac = function LightboxComponent_Factory(t) { return new (t || LightboxComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.LightboxEvent), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.LightboxWindowRef), i0.ɵɵdirectiveInject(i2.FileSaverService), i0.ɵɵdirectiveInject(i3.DomSanitizer), i0.ɵɵdirectiveInject(DOCUMENT)); };\nLightboxComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LightboxComponent, selectors: [[\"\", \"lb-content\", \"\"]], viewQuery: function LightboxComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(_c2, 5);\n        i0.ɵɵviewQuery(_c3, 5);\n        i0.ɵɵviewQuery(_c4, 5);\n        i0.ɵɵviewQuery(_c5, 5);\n        i0.ɵɵviewQuery(_c6, 5);\n        i0.ɵɵviewQuery(_c7, 5);\n        i0.ɵɵviewQuery(_c8, 5);\n    } if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._outerContainerElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._containerElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._leftArrowElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._rightArrowElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._navArrowElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._dataContainerElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._imageElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._captionElem = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._numberElem = _t.first);\n    } }, hostVars: 2, hostBindings: function LightboxComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function LightboxComponent_click_HostBindingHandler($event) { return ctx.close($event); });\n    } if (rf & 2) {\n        i0.ɵɵclassMap(ctx.ui.classList);\n    } }, inputs: { album: \"album\", currentImageIndex: \"currentImageIndex\", options: \"options\", cmpRef: \"cmpRef\" }, attrs: _c9, decls: 34, vars: 14, consts: [[\"id\", \"outerContainer\", 1, \"lb-outerContainer\", \"transition\"], [\"outerContainer\", \"\"], [\"id\", \"container\", 1, \"lb-container\"], [\"container\", \"\"], [\"id\", \"image\", 1, \"lb-image\", \"animation\", \"fadeIn\", 3, \"src\", \"hidden\"], [\"image\", \"\"], [1, \"lb-nav\", 3, \"hidden\"], [\"navArrow\", \"\"], [1, \"lb-prev\", 3, \"hidden\", \"click\"], [\"leftArrow\", \"\"], [1, \"lb-next\", 3, \"hidden\", \"click\"], [\"rightArrow\", \"\"], [1, \"lb-loader\", 3, \"hidden\", \"click\"], [1, \"lb-cancel\"], [1, \"lb-dataContainer\", 3, \"hidden\"], [\"dataContainer\", \"\"], [1, \"lb-data\"], [1, \"lb-details\"], [1, \"lb-caption\", \"animation\", \"fadeIn\", 3, \"hidden\", \"innerHtml\"], [\"caption\", \"\"], [1, \"lb-number\", \"animation\", \"fadeIn\", 3, \"hidden\"], [\"number\", \"\"], [1, \"lb-controlContainer\"], [1, \"lb-closeContainer\"], [1, \"lb-close\", 3, \"click\"], [1, \"lb-downloadContainer\", 3, \"hidden\"], [1, \"lb-download\", 3, \"click\"], [1, \"lb-turnContainer\", 3, \"hidden\"], [1, \"lb-turnLeft\", 3, \"click\"], [1, \"lb-turnRight\", 3, \"click\"], [1, \"lb-zoomContainer\", 3, \"hidden\"], [1, \"lb-zoomOut\", 3, \"click\"], [1, \"lb-zoomIn\", 3, \"click\"]], template: function LightboxComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0, 1)(2, \"div\", 2, 3);\n        i0.ɵɵelement(4, \"img\", 4, 5);\n        i0.ɵɵelementStart(6, \"div\", 6, 7)(8, \"a\", 8, 9);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_8_listener() { return ctx.prevImage(); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"a\", 10, 11);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_10_listener() { return ctx.nextImage(); });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 12);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_div_click_12_listener($event) { return ctx.close($event); });\n        i0.ɵɵelement(13, \"a\", 13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"div\", 14, 15)(16, \"div\", 16)(17, \"div\", 17);\n        i0.ɵɵelement(18, \"span\", 18, 19);\n        i0.ɵɵelementStart(20, \"span\", 20, 21);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 22)(24, \"div\", 23)(25, \"a\", 24);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_25_listener($event) { return ctx.close($event); });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 25)(27, \"a\", 26);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_27_listener($event) { return ctx.download($event); });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(28, \"div\", 27)(29, \"a\", 28);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_29_listener($event) { return ctx.control($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"a\", 29);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_30_listener($event) { return ctx.control($event); });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"div\", 30)(32, \"a\", 31);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_32_listener($event) { return ctx.control($event); });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"a\", 32);\n        i0.ɵɵlistener(\"click\", function LightboxComponent_Template_a_click_33_listener($event) { return ctx.control($event); });\n        i0.ɵɵelementEnd()()()()();\n    } if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"src\", ctx.album[ctx.currentImageIndex].src, i0.ɵɵsanitizeUrl)(\"hidden\", ctx.ui.showReloader);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showArrowNav);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showLeftArrow);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showRightArrow);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showReloader);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.ui.showReloader);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showCaption)(\"innerHtml\", ctx.album[ctx.currentImageIndex].caption, i0.ɵɵsanitizeHtml);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showPageNumber);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.content.pageNumber);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showDownloadButton);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showRotateButton);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"hidden\", !ctx.ui.showZoomButton);\n    } }, encapsulation: 2 });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(LightboxComponent, [{\n        type: Component,\n        args: [{\n                template: `\n    <div class=\"lb-outerContainer transition\" #outerContainer id=\"outerContainer\">\n      <div class=\"lb-container\" #container id=\"container\">\n        <img class=\"lb-image\"\n             id=\"image\"\n             [src]=\"album[currentImageIndex].src\"\n             class=\"lb-image animation fadeIn\"\n             [hidden]=\"ui.showReloader\"\n             #image>\n        <div class=\"lb-nav\" [hidden]=\"!ui.showArrowNav\" #navArrow>\n          <a class=\"lb-prev\" [hidden]=\"!ui.showLeftArrow\" (click)=\"prevImage()\" #leftArrow></a>\n          <a class=\"lb-next\" [hidden]=\"!ui.showRightArrow\" (click)=\"nextImage()\" #rightArrow></a>\n        </div>\n        <div class=\"lb-loader\" [hidden]=\"!ui.showReloader\" (click)=\"close($event)\">\n          <a class=\"lb-cancel\"></a>\n        </div>\n      </div>\n    </div>\n    <div class=\"lb-dataContainer\" [hidden]=\"ui.showReloader\" #dataContainer>\n      <div class=\"lb-data\">\n        <div class=\"lb-details\">\n          <span class=\"lb-caption animation fadeIn\" [hidden]=\"!ui.showCaption\" [innerHtml]=\"album[currentImageIndex].caption\" #caption>\n          </span>\n          <span class=\"lb-number animation fadeIn\" [hidden]=\"!ui.showPageNumber\" #number>{{ content.pageNumber }}</span>\n        </div>\n        <div class=\"lb-controlContainer\">\n          <div class=\"lb-closeContainer\">\n            <a class=\"lb-close\" (click)=\"close($event)\"></a>\n          </div>\n          <div class=\"lb-downloadContainer\" [hidden]=\"!ui.showDownloadButton\">\n            <a class=\"lb-download\" (click)=\"download($event)\"></a>\n          </div>\n          <div class=\"lb-turnContainer\" [hidden]=\"!ui.showRotateButton\">\n            <a class=\"lb-turnLeft\" (click)=\"control($event)\"></a>\n            <a class=\"lb-turnRight\" (click)=\"control($event)\"></a>\n          </div>\n          <div class=\"lb-zoomContainer\" [hidden]=\"!ui.showZoomButton\">\n            <a class=\"lb-zoomOut\" (click)=\"control($event)\"></a>\n            <a class=\"lb-zoomIn\" (click)=\"control($event)\"></a>\n          </div>\n        </div>\n      </div>\n    </div>`,\n                selector: '[lb-content]',\n                host: {\n                    '(click)': 'close($event)',\n                    '[class]': 'ui.classList'\n                }\n            }]\n    }], function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: i1.LightboxEvent }, { type: i0.ElementRef }, { type: i1.LightboxWindowRef }, { type: i2.FileSaverService }, { type: i3.DomSanitizer }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, { album: [{\n            type: Input\n        }], currentImageIndex: [{\n            type: Input\n        }], options: [{\n            type: Input\n        }], cmpRef: [{\n            type: Input\n        }], _outerContainerElem: [{\n            type: ViewChild,\n            args: ['outerContainer', { static: false }]\n        }], _containerElem: [{\n            type: ViewChild,\n            args: ['container', { static: false }]\n        }], _leftArrowElem: [{\n            type: ViewChild,\n            args: ['leftArrow', { static: false }]\n        }], _rightArrowElem: [{\n            type: ViewChild,\n            args: ['rightArrow', { static: false }]\n        }], _navArrowElem: [{\n            type: ViewChild,\n            args: ['navArrow', { static: false }]\n        }], _dataContainerElem: [{\n            type: ViewChild,\n            args: ['dataContainer', { static: false }]\n        }], _imageElem: [{\n            type: ViewChild,\n            args: ['image', { static: false }]\n        }], _captionElem: [{\n            type: ViewChild,\n            args: ['caption', { static: false }]\n        }], _numberElem: [{\n            type: ViewChild,\n            args: ['number', { static: false }]\n        }] }); })();\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}