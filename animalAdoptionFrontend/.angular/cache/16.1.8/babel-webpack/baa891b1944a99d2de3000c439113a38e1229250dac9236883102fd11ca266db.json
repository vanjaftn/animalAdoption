{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let FoundPageComponent = class FoundPageComponent {\n  constructor(animalService, photoService, lostAndFoundService) {\n    this.animalService = animalService;\n    this.photoService = photoService;\n    this.lostAndFoundService = lostAndFoundService;\n    this.animals = new Array();\n    this.LostAndFounds = new Array();\n    this.dob = \"\";\n  }\n  ngOnInit() {\n    console.log(localStorage.getItem('token'));\n    this.allAnimals();\n  }\n  getDOB(date) {\n    let day = date.getDate();\n    let month = date.getMonth() + 1;\n    let year = date.getFullYear();\n    let dob = day + '.' + month + '.' + year + '.';\n    return dob;\n  }\n  allAnimals() {\n    this.lostAndFoundService.readAllLostApproved().subscribe(response => {\n      // @ts-ignore\n      JSON.parse(response).forEach(lostAndFound => {\n        this.animalService.read(lostAndFound.animalId).subscribe(response => {\n          let animal = JSON.parse(response);\n          animal.dob = this.getDOB(new Date(animal.dateOfBirth));\n          this.animals.push(animal);\n          this.photoService.allAnimalPhotos(animal.animalId).subscribe(response => {\n            const allPhotos = JSON.parse(response);\n            animal.photoURL = \"\\\\assets\\\\images\\\\\" + allPhotos[0].photoURL;\n            // @ts-ignore\n            let photoURL;\n            photoURL = \"\\\\assets\\\\images\\\\\" + allPhotos[0];\n            console.log(allPhotos[0].photoURL);\n          });\n        });\n      });\n    });\n    console.log(this.animals);\n  }\n  read(animalId) {\n    this.animalService.read(animalId).subscribe(response => {\n      let animalId = JSON.parse(response).animalId;\n      let animalIdString = JSON.stringify(animalId);\n      localStorage.setItem('selectedAnimalProfileId', animalId);\n      console.log(localStorage.getItem('selectedAnimalProfileId'));\n      console.log(animalIdString);\n      // alert('Successfully registered');\n      const animalURL = `animal-profile/${animalId}`;\n      window.location.href = animalURL;\n      // window.location.href = '/unadopted-animals'\n    });\n  }\n};\n\nFoundPageComponent = __decorate([Component({\n  selector: 'app-found-page',\n  templateUrl: './found-page.component.html',\n  styleUrls: ['./found-page.component.css']\n})], FoundPageComponent);","map":{"version":3,"names":["Component","FoundPageComponent","constructor","animalService","photoService","lostAndFoundService","animals","Array","LostAndFounds","dob","ngOnInit","console","log","localStorage","getItem","allAnimals","getDOB","date","day","getDate","month","getMonth","year","getFullYear","readAllLostApproved","subscribe","response","JSON","parse","forEach","lostAndFound","read","animalId","animal","Date","dateOfBirth","push","allAnimalPhotos","allPhotos","photoURL","animalIdString","stringify","setItem","animalURL","window","location","href","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\vanja\\Desktop\\diplomski\\animalAdoption\\animalAdoptionFrontend\\src\\app\\modules\\found-page\\found-page.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-found-page',\n  templateUrl: './found-page.component.html',\n  styleUrls: ['./found-page.component.css']\n})\nexport class FoundPageComponent {\n  animals : Array<Animal> = new Array()\n  LostAndFounds : Array<Animal> = new Array()\n  public dob: string =\"\"\n\n  constructor(private animalService: AnimalService, private photoService: PhotoService, private lostAndFoundService: LostAndFoundService) { }\n\n  ngOnInit(): void {\n    console.log(localStorage.getItem('token'))\n\n    this.allAnimals()\n  }\n\n  public getDOB(date : Date): string {\n    let day = date.getDate();\n    let month = date.getMonth() + 1;\n    let year = date.getFullYear();\n    let dob = day + '.' + month + '.' + year + '.'\n    return dob\n  }\n\n  allAnimals(){\n  \n    this.lostAndFoundService.readAllLostApproved().subscribe((response: any) => {\n      \n      // @ts-ignore\n      JSON.parse(response).forEach(lostAndFound => {\n\n      this.animalService.read(lostAndFound.animalId).subscribe((response: any) => {\n        let animal = JSON.parse(response)\n\n        animal.dob = this.getDOB(new Date(animal.dateOfBirth))\n\n        this.animals.push(animal)\n        \n        this.photoService.allAnimalPhotos(animal.animalId).subscribe((response: any) => {\n          const allPhotos = JSON.parse(response)\n    \n          animal.photoURL = \"\\\\assets\\\\images\\\\\"+allPhotos[0].photoURL\n          // @ts-ignore\n            let photoURL : string\n            photoURL =\"\\\\assets\\\\images\\\\\"+allPhotos[0]\n    \n          console.log(allPhotos[0].photoURL)\n\n        });\n      });\n\n      });\n      \n    });\n    console.log(this.animals)\n  }\n\n  read(animalId : string){\n\n    this.animalService.read(animalId).subscribe((response: any) => {\n      let animalId = JSON.parse(response).animalId\n      let animalIdString = JSON.stringify(animalId)\n      \n      localStorage.setItem('selectedAnimalProfileId', animalId)\n      console.log(localStorage.getItem('selectedAnimalProfileId'))\n      console.log(animalIdString)\n\n      // alert('Successfully registered');\n\n      const animalURL = `animal-profile/${animalId}`;\n      window.location.href = animalURL;\n\n      // window.location.href = '/unadopted-animals'\n    });\n  }\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}