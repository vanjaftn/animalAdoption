{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { LoginUser } from '../model/login-user.model';\nexport let LoginUserComponent = class LoginUserComponent {\n  constructor(userService) {\n    this.userService = userService;\n    this.loginUser = new LoginUser();\n    this.token = \"\";\n    this.role = \"\";\n    this.loggedUserId = \"\";\n  }\n  ngOnInit() {\n    console.log(localStorage.getItem('token'));\n  }\n  login() {\n    this.userService.login(this.loginUser).subscribe(response => {\n      this.token = response;\n      localStorage.setItem('token', this.token);\n      console.log(this.token);\n      let decodedJWT = JSON.parse(window.atob(this.token.split('.')[1]));\n      alert('Successfully logged in');\n      this.loggedUserId = decodedJWT.sub;\n      localStorage.setItem('loggedUserEmail', this.loggedUserId);\n      console.log(decodedJWT.sub);\n      window.location.href = '/unadopted-animals';\n    }, error => {\n      alert(\"Invalid email/password\");\n      console.log(error);\n    });\n  }\n};\nLoginUserComponent = __decorate([Component({\n  selector: 'app-login-user',\n  templateUrl: './login-user.component.html',\n  styleUrls: ['./login-user.component.css']\n})], LoginUserComponent);","map":{"version":3,"names":["Component","LoginUser","LoginUserComponent","constructor","userService","loginUser","token","role","loggedUserId","ngOnInit","console","log","localStorage","getItem","login","subscribe","response","setItem","decodedJWT","JSON","parse","window","atob","split","alert","sub","location","href","error","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\vanja\\Desktop\\diplomski\\animalAdoption\\animalAdoptionFrontend\\src\\app\\modules\\login-user\\login-user.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { LoginUser } from '../model/login-user.model';\nimport { UserService } from '../service/user.service';\n\n@Component({\n  selector: 'app-login-user',\n  templateUrl: './login-user.component.html',\n  styleUrls: ['./login-user.component.css']\n})\nexport class LoginUserComponent {\n  public loginUser : LoginUser = new LoginUser();\n  public token : string = \"\";\n  public role : string = \"\";\n  public loggedUserId : string = \"\";\n\n  constructor(private userService: UserService) { }\n\n  ngOnInit(): void {\n    console.log(localStorage.getItem('token'));\n\n  }\n\n  login(){\n    this.userService.login(this.loginUser).subscribe((response: any) => {\n      this.token = response;\n      localStorage.setItem('token',this.token);\n      console.log(this.token)\n\n      let decodedJWT = JSON.parse(window.atob(this.token.split('.')[1]));\n\n      alert('Successfully logged in');\n\n      this.loggedUserId = decodedJWT.sub;\n      localStorage.setItem('loggedUserEmail', this.loggedUserId);\n      console.log(decodedJWT.sub);\n\n      window.location.href = '/unadopted-animals'\n    },\n    (error) => {\n      alert(\"Invalid email/password\");\n      console.log(error);\n    }\n   );\n  } \n}\n\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,SAAS,QAAQ,2BAA2B;AAQ9C,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAM7BC,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;IALxB,KAAAC,SAAS,GAAe,IAAIJ,SAAS,EAAE;IACvC,KAAAK,KAAK,GAAY,EAAE;IACnB,KAAAC,IAAI,GAAY,EAAE;IAClB,KAAAC,YAAY,GAAY,EAAE;EAEe;EAEhDC,QAAQA,CAAA;IACNC,OAAO,CAACC,GAAG,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;EAE5C;EAEAC,KAAKA,CAAA;IACH,IAAI,CAACV,WAAW,CAACU,KAAK,CAAC,IAAI,CAACT,SAAS,CAAC,CAACU,SAAS,CAAEC,QAAa,IAAI;MACjE,IAAI,CAACV,KAAK,GAAGU,QAAQ;MACrBJ,YAAY,CAACK,OAAO,CAAC,OAAO,EAAC,IAAI,CAACX,KAAK,CAAC;MACxCI,OAAO,CAACC,GAAG,CAAC,IAAI,CAACL,KAAK,CAAC;MAEvB,IAAIY,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,IAAI,CAAC,IAAI,CAAChB,KAAK,CAACiB,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAElEC,KAAK,CAAC,wBAAwB,CAAC;MAE/B,IAAI,CAAChB,YAAY,GAAGU,UAAU,CAACO,GAAG;MAClCb,YAAY,CAACK,OAAO,CAAC,iBAAiB,EAAE,IAAI,CAACT,YAAY,CAAC;MAC1DE,OAAO,CAACC,GAAG,CAACO,UAAU,CAACO,GAAG,CAAC;MAE3BJ,MAAM,CAACK,QAAQ,CAACC,IAAI,GAAG,oBAAoB;IAC7C,CAAC,EACAC,KAAK,IAAI;MACRJ,KAAK,CAAC,wBAAwB,CAAC;MAC/Bd,OAAO,CAACC,GAAG,CAACiB,KAAK,CAAC;IACpB,CAAC,CACD;EACF;CACD;AAnCY1B,kBAAkB,GAAA2B,UAAA,EAL9B7B,SAAS,CAAC;EACT8B,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,6BAA6B;EAC1CC,SAAS,EAAE,CAAC,4BAA4B;CACzC,CAAC,C,EACW9B,kBAAkB,CAmC9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}